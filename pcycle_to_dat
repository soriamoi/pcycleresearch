"""
The following code converts a .pcycle file into a .dat file that can be read by an ILP solver (gurobi or CPLEX)
Created on Mon Oct 28 21:23:12 2019
@author: tiange1
"""


input_cycle_span_info = []

input_file_name = 'US_DDCD'

# read a .pcycle file generated by python
with open(input_file_name + '.pcycle','r') as nn:
    for lines in nn.readlines():
        inf = lines.split(':')
        assert len(inf) == 2
        input_cycle_span_info.append(inf)
        
# Write to a .dat file for ILP cycle placement
with open(input_file_name + '.datprep', 'w') as write_file:
    cycle_id = 1
    for ii in range(0, len(input_cycle_span_info)):
        span_info = input_cycle_span_info[ii][1]
        line_info = '[P' + str(cycle_id) + ',' + ' ' + '*]' + str(span_info)
        write_file.write(line_info)
        cycle_id += 1
